{% extends 'adminr/base.html' %}
{% block css%}
<link rel="stylesheet" href="rstatic/admin/plugins/select2/select2.min.css">
{% endblock %}
{% block  content %}
<section class="content-header">
   <h1>
      Mive 
      <small>Orders</small>
   </h1>
   <ol class="breadcrumb">
      <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
      <li class="active">Orders</li>
   </ol>
</section>
<section class="content">
<form id="bigb">
<div class="row">
<div class="col-md-3 col-md-offset-1 " style="position:relative">
       <div class="form-group">
                <label>Multiple</label>
                <select class="form-control select2" multiple="multiple" data-placeholder="Select a State" style="width: 100%;" name="sellers" id="sellerselect">
                 {%for sel in sellers%}
                  <option selected value="{{sel.seller_id}}">{{sel.nameOfSeller}}</option>
                  {%endfor%}
                 }
                </select>
              </div>
              </div>
      <div class="col-md-6">
      <div class="row">
         <div class="col-md-7">
           <div class="form-group">
           <div class="col-sm-12" id="fatu">
               Select time range
                <input id="range_4" type="text" name="date" value="7;200">
                {%csrf_token%}
              </div>

              <!-- /.input group -->
            </div>
         </div>
         <div class="col-md-3">
         Sort by
         <select name="sortby" class="form-control select2" style="width: 100%;" id="sortby">
    <option selected="selected" value="date">Date</option>
    <option  value="subtotal">Subtotal</option>
    <option  value="status">status</option>
    <option  value="seller">seller</option>
    </select>
         </div>
         <div class="col-md-2 ">
       <div class="form-group" id="checkbox">
                  <div class="checkbox" >
                    <label>
                      <input type="radio" name="rak" value="paid">
                      paid
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="radio" name="rak" value="all" checked>
                      all
                    </label>
                  </div>
                  <div class="checkbox">
                    <label>
                      <input type="radio" name="rak" value="unpaid">
                      unpaid
                    </label>
                  </div>

                </div>
              </div>
       </div>
      </div>
</div><br>
</form>
      <div class="row">
      {% if orders|length = 0 %}
      <div class="col-md-10 col-md-offset-1" style="position:relative">
          <div class="box">
          <div class="box-header with-border">
              <h3 class="box-title">You have placed no orders</h3>
            </div>
          </div>
          </div>
        {% else %}
        <div class="col-md-10 col-md-offset-1" style="position:relative">
          <div class="box">
          <div class="box-header with-border">
              <h3 class="box-title">Your orders</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body" id="targetreload">
              <table class="table table-responsive borderless">
                <tr class="success">
                  <th class="hidden-xs hidden-sm"><center>Seller</center></th>
                  <th><center>Date</center></th>
                  <th><center>Status</center></th>
                  <th><center>Subtotal</center></th>
                  <th class="hidden-sm hidden-xs"><center>Details</center></th>
                </tr>
                {%for order in orders%}
                <tr>
                  <td class="hidden-xs hidden-sm"><center>{{order.seller.nameOfSeller}}</center></td>
                  <td>
                    <center>{{order.timeOfCreate}}</center>
                  </td>
                  <td>
                    <center>{{order.status}}</center>
                  </td>
                  <td><center>
                  <center>â‚¹{{order.subtotal}}</center>
                  </td>
                  <td>
                    <center><a data-productid="{{item.product.product_id}}" href="/orderDetail?orderId={{order.order_id}}" ><span class="badge bg-yellow" style="color:blue">Details</span></a></center>
                  </td>
                </tr>
                {% endfor%}
              </table>
            </div>
            <!-- /.box-body -->

            <div class="box-footer clearfix">
            </div>
          </div>
        </div>
      </div>
      {% endif %}
</section>
<div class="modal fade" id="order-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;opacity:0.96">
         <div class="modal-dialog">
            <div class="loginmodal-container2 loginmodal-container" id="order-detail-container" style="max-width:none;max-height:none;">
               <form id="orderdata" method="get" action="/ordercategory" style="display:inline;">
              <input type="hidden" name="cartid" value="{{miveuser.cart.cart_id}}">
              <input type="hidden" name="categoryvendorid" id="orderplaceid" value="{{pd.categoryvendor_id}}">
               <div class="col-md-3 col-lg-3 col-xs-12 col-sm-12 col-md-offset-1 col-lg-offset-1">
                     <input autofocus placeholder="Deliver date" id="datetime" name="deliveryTime" type="date" class="form-control">
               </div>
               <div class="col-md-4 col-lg-4 col-xs-12">
                     <textarea id="orderMsg" name="orderMsg" type="text" class="form-control" placeholder="Add Comment if any query"></textarea> 
                     <input type="hidden" name="csrfmiddlewaretoken" value="XxYq2vc6MzqqLBPH86mIQeEfObTCXVCc">
               </div>
               <div class="col-md-1 col-lg-1 col-xs-6 ol-md-offset-0 col-lg-offset-0">
                  <button type="submit" id="checkout" class="btn btn-success btn-lg">
                  Checkout
                  </button>
               </div>
               </form>
            </div>
         </div>
      </div>
{%endblock%}
{% block script%}
<script>
  $('body').on('click','.orderplace',function(event){
    categoryvendorid = $(this).attr('data-categoryvendorid')
    console.log('clicked')
    $('#orderplaceid').attr('value',categoryvendorid)
    $('#order-modal').modal('toggle')
  })
</script>
<script>
  $('body').on('click','#fatu',function(event){
    data = $('#bigb').serialize()
    $('#targetreload').html("<center><img src='/rstatic/new/images/282.GIF'></center>")
    $.ajax({
                    type: "POST",
                    url: '/filter/seeorder',
                    data: data, // serializes the form's elements.
                    success: function(data)
                    {
                      $('#targetreload').html(data)
                      console.log(data)
                    },
                    error:function(data){
                    mivenotify('error','Item add','Error occured while adding product')
                    console.log(data)
                    }
                  });
  })
  </script>
  <script>
  $('body').on('change','#sortby',function(event){
    data = $('#bigb').serialize()
    console.log('yolo')
    $('#targetreload').html("<center><img src='/rstatic/new/images/282.GIF'></center>")
    $.ajax({
                    type: "POST",
                    url: '/filter/seeorder',
                    data: data, // serializes the form's elements.
                    success: function(data)
                    {
                      $('#targetreload').html(data)
                      console.log(data)
                    },
                    error:function(data){
                    mivenotify('error','Item add','Error occured while adding product')
                    console.log(data)
                    }
                  });
  })
  </script>
  <script>
  $('body').on('change','#sellerselect',function(event){
    data = $('#bigb').serialize()
    console.log('yolo')
    $('#targetreload').html("<center><img src='/rstatic/new/images/282.GIF'></center>")
    $.ajax({
                    type: "POST",
                    url: '/filter/seeorder',
                    data: data, // serializes the form's elements.
                    success: function(data)
                    {
                      $('#targetreload').html(data)
                      console.log(data)
                    },
                    error:function(data){
                    mivenotify('error','Item add','Error occured while adding product')
                    console.log(data)
                    }
                  });
  })
  </script>
  <script>
  $('body').on('click','#checkbox',function(event){
    data = $('#bigb').serialize()
    console.log('yolo')
    $('#targetreload').html("<center><img src='/rstatic/new/images/282.GIF'></center>")
    $.ajax({
                    type: "POST",
                    url: '/filter/seeorder',
                    data: data, // serializes the form's elements.
                    success: function(data)
                    {
                      $('#targetreload').html(data)
                      console.log(data)
                    },
                    error:function(data){
                    mivenotify('error','Item add','Error occured while adding product')
                    console.log(data)
                    }
                  });
  })
  </script>
<script src="/rstatic/admin/plugins/ionslider/ion.rangeSlider.min.js"></script>
  <script>
  $(function () {
    /* BOOTSTRAP SLIDER */
    $('.slider').slider();

    /* ION SLIDER */
    $("#range_4").ionRangeSlider({
      min: 7,
      max: 200,
      from: 7,
      to: 200,
      type: "single",
      step: 1,
      postfix: "days",
      hideMinMax: true,
      hideFromTo: false
    });
  });

</script>
<script src="rstatic/admin/plugins/select2/select2.full.min.js"></script>
<script type="text/javascript">
  $(".select2").select2();
</script>>

{% endblock %}